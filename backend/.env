# backend/.env
# ==========================================
# [ ITM.Vision_SSO Backend Environment ]
# ==========================================

# 1. 서버 포트 (원복: 3000)
# 백엔드는 내부적으로 3000번 포트에서 실행됩니다.
PORT=3000

# 2. 데이터베이스 연결
DATABASE_URL="file:./dev.db"

# ==========================================
# [ SAML 인증 설정 ]
# ==========================================

# [필수] IDP 진입점 (Node.js 샘플: idpUrl)
SAML_ENTRY_POINT=https://stsds.secsso.net/adfs/ls/

# [필수] Issuer (Entity ID)
# AD에 등록된 식별자 (포트와 무관하게 고정값)
SAML_ISSUER=https://localhost:44364

# [필수] Callback URL (ACS URL)
# ★ 중요: 백엔드 포트는 3000이지만, AD는 브라우저(8082)를 통해 접속하므로
# 주소는 반드시 프론트엔드 주소인 'https://localhost:8082'로 적어야 합니다.
SAML_CALLBACK_URL=https://localhost:8082/api/auth/callback

# [필수] IDP 인증서 (Node.js 샘플: cert)
# [직접 입력] 'MII...' 값을 한 줄로 넣으세요.
SAML_IDP_CERT=

# [선택] 로그아웃 URL
SAML_LOGOUT_URL=https://stsds.secsso.net/adfs/ls/?wa=wsignoutcleanup1.0

# [신규 추가] SP 공개키 (메타데이터 생성용)
SAML_SP_PUBLIC_CERT="-----BEGIN CERTIFICATE-----
MIID...
(중간 내용 생략)
...
-----END CERTIFICATE-----"

# ==========================================
# [ 프론트엔드 연동 ]
# ==========================================

# 로그인 성공 후 이동할 주소 (개발환경 프론트엔드)
FRONTEND_URL=https://localhost:8082/login

# ==========================================
# [ HTTPS 설정 제거 ]
# 프론트엔드(Vite)가 HTTPS를 담당하므로 백엔드는 설정 불필요
# ==========================================
